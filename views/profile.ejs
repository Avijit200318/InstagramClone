<% include ./partials/header.ejs %>
  <div class="w-full min-h-full bg-black text-white py-5 md:pl-16 lg:pl-20">
    <div class="nav flex justify-between items-center px-4 md:relative ">
      <h3 class="text-lg sm:text-xl font-semibold md:text-2xl 2xl:ml-4">
        <%= user.username%>
      </h3>
      <div class="icons flex gap-5 md:gap-8">
        <a href="/upload"><i class="text-[1.6rem] ri-add-box-line sm:text-[1.7rem]"></i></a>
        <a href="/settings">
          <i class="text-[1.6rem] ri-menu-line sm:text-[1.7rem]"></i>
        </a>
      </div>
    </div>
    <div class="flex justify-between items-center pl-4 pr-[12vw] mt-8 2xl:ml-4">
      <div class="w-16 h-16 bg-sky-100 rounded-full overflow-hidden sm:w-24 sm:h-24 md:w-28 md:h-28">
        <% if(user.profileImage && user.profileImage.contentType && user.profileImage.data){%>
          <img src="data:<%= user.profileImage.contentType%>;base64,<%= user.profileImage.data.toString('base64')%>"
            class="w-full h-full object-cover" alt="">

          <%}%>

      </div>
      <div class="stats flex gap-5 items-center justify-between">
        <div class="flex flex-col items-center justify-center">
          <h3 class="sm:text-lg"><%= user.posts.length%></h3>
          <h4 class="sm:text-lg">Posts</h4>
        </div>
        <a href="/followers/<%= user._id%>">
          <div class="flex flex-col items-center justify-center">
            <h3 class="sm:text-lg"><%= user.followers.length%></h3>
            <h4 class="sm:text-lg">Followers</h4>
          </div>
        </a>
        <a href="/following/<%= user._id%>">
          <div class="flex flex-col items-center justify-center">
            <h3 class="sm:text-lg"><%= user.following.length%></h3>
            <h4 class="sm:text-lg">Following</h4>
          </div>
        </a>
      </div>
    </div>
    <div class="dets px-6 mt-5">
      <h3 class="text-lg mb-1 sm:text-xl sm:mb-2 md:text-2xl 2xl:ml-4">
        <%= user.name%>
      </h3>
      <p class="text-xs tracking-tight opacity-50 sm:text-sm md:text-base 2xl:ml-4">
        <%= user.bio%>
      </p>
    </div>
    <div class="px-2 mt-5 flex justify-around md:w-[60%]">
      <a class="px-6 py-2 bg-zinc-800 text-sm rounded-md leading-none font-semibold hover:bg-zinc-700 transition-all duration-500 w-[40%] text-center md:text-base" href="/edit">Edit Profile</a>
      <a class="px-6 py-2 bg-zinc-800 text-sm rounded-md leading-none font-semibold hover:bg-zinc-700 transition-all duration-500 w-[40%] text-center md:text-base" href="">Share Profile</a>
      <a class="px-4 py-2 bg-zinc-800 text-sm rounded-md leading-none font-semibold hover:bg-zinc-700 transition-all duration-500 w-[15%] text-center md:text-base lg:text-lg lg:py-1" href=""><i class="ri-user-add-line"></i></a>
    </div>
    <div class="flex w-full mt-2 items-center border-b-2 border-zinc-800">
      <h1 class="w-[33.3%] text-center text-xl border-b-2 pb-2 pt-4 md:text-2xl"><i class="fa-solid fa-table-cells"></i></h1>
      <h1 class="w-[33.3%] text-center text-xl pb-2 pt-4 md:text-2xl"><i class="fa-regular fa-square-caret-right"></i></h1>
      <h1 class="w-[33.3%] text-center text-sm pb-2 pt-4 md:text-base"><p><i class="fa-regular fa-user border-[3px] p-[2px]"></i></p></h1>
    </div>
    <div class="posts w-full flex justify-start gap-1 py-2 flex-wrap mb-12 sm:gap-2 md:mb-0 2xl:gap-1">
      <% user.posts.forEach(function(ele) { %>
        <div class="post w-[32.5%] h-[35vw] bg-sky-100 overflow-hidden sm:h-[30vw] md:w-[24%] md:h-[25vw] xl:w-[19.3%] xl:h-[19vw] 2xl:w-[16.3%] 2xl:h-[16vw]">
          <a href="/post/find/<%= ele._id%>">
            <img src="data:<%= ele.picture.contentType%>;base64,<%= ele.picture.data.toString('base64')%>" alt=""
              class="w-full h-full object-cover">
          </a>
        </div>
        <% }) %>

    </div>
  </div>
  <% include ./partials/footer.ejs %>