<% include ./partials/header.ejs %>
  <div class="w-full min-h-screen bg-black text-white py-5 flex flex-col items-center">
    <div class="flex justify-between items-center px-4 w-full">
      <a class="text-sm text-blue-500 sm:text-base md:text-xs" href="/profile"><i class="ri-arrow-left-s-line"></i> Profile</a>
      <h2 class="leading-none text-sm sm:text-base md:text-lg">Edit Profile</h2>
      <a class="text-sm sm:text-base md:text-lg" href="/feed"><i class="ri-home-line"></i> Home</a>
    </div>
    <div class="flex flex-col items-center gap-2 mt-20">
      <div class="image w-20 h-20 bg-sky-100 rounded-full overflow-hidden lg:w-24 lg:h-24">
        <% if(user.profileImage && user.profileImage.contentType && user.profileImage.data){%>
          <img src="data:<%= user.profileImage.contentType%>;base64,<%= user.profileImage.data.toString('base64')%>" class="w-full h-full object-cover" alt="">
          <%}%>
      </div>
      <button id="editBtn" class="text-blue-500 capitalize">edit picture</button>
    </div>
    <div class="mt-10 relative w-[22rem] sm:w-[26rem] md:w-[31rem]">
      <h3 class="text-lg leading-none pl-4 md:text-xl">Edit Account Details</h3>
      <hr class="opacity-30 my-3 ml-4">
      <p class="error text-sm text-red-600 font-semibold absolute top-6"><%= error%></p>
      <div class="w-full flex justify-center">
        <form class="w-[21rem] sm:w-[25rem] md:w-[30rem]" action="/update" method="post" enctype="multipart/form-data">
          <input id="imageInput" hidden type="file" name="image">
          <input class="px-3 mt-2 py-2 border-2 border-zinc-800 rounded-md block w-full bg-zinc-900 md:py-3 md:text-lg" type="text" placeholder="username" name="username" value="<%= user.username%>">
          <input class="px-3 mt-2 py-2 border-2 border-zinc-800 rounded-md block w-full bg-zinc-900 md:py-3 md:text-lg" type="text" placeholder="name" name="name" value="<%= user.name%>">
          <textarea class="px-3 mt-2 py-2 border-2 border-zinc-800 rounded-md block w-full bg-zinc-900 resize-none md:py-3 md:text-lg" placeholder="Bio" name="bio"><%= user.bio%></textarea>
          <input class="w-full bg-blue-500 px-3 py-3 rounded-md mt-2 cursor-pointer md:text-lg" type="submit" value="Update Details">
        </form>
      </div>
    </div>
  </div>
  <script>
    document.querySelector("#editBtn").addEventListener('click', function() {
      document.querySelector("#imageInput").click();
    })
  </script>
<% include ./partials/footer.ejs %>